11Ï£ºÏ∞®

# EffectÎ°ú ÎèôÍ∏∞ÌôîÌïòÍ∏∞

### üìñ Ï£ºÏöî ÎÇ¥Ïö© ÏöîÏïΩ

#### **1. EffectÏùò Í∏∞Î≥∏ Í∞úÎÖê**
EffectÎäî Î†åÎçîÎßÅ ÏûêÏ≤¥Ïóê ÏùòÌï¥ Î∞úÏÉùÌïòÎäî Î∂ÄÏàò Ìö®Í≥ºÎ•º ÌäπÏ†ïÌïòÎäî Í≤ÉÏúºÎ°ú, ÌäπÏ†ï Ïù¥Î≤§Ìä∏Í∞Ä ÏïÑÎãå Î†åÎçîÎßÅÏóê ÏùòÌï¥ ÏßÅÏ†ë Î∞úÏÉùÌï©ÎãàÎã§. EffectÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ Î†åÎçîÎßÅ ÌõÑ ÌäπÏ†ï ÏΩîÎìúÎ•º Ïã§ÌñâÌïòÏó¨ React Ïô∏Î∂ÄÏùò ÏãúÏä§ÌÖúÍ≥º Ïª¥Ìè¨ÎÑåÌä∏Î•º ÎèôÍ∏∞ÌôîÌï† Ïàò ÏûàÏäµÎãàÎã§.

#### **2. Effect ÏûëÏÑ± 3Îã®Í≥Ñ**
EffectÎ•º ÏûëÏÑ±ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî Îã§Ïùå ÏÑ∏ Îã®Í≥ÑÎ•º Îî∞Î¶ÖÎãàÎã§: 1) Effect ÏÑ†Ïñ∏, 2) Effect ÏùòÏ°¥ÏÑ± ÏßÄÏ†ï, 3) ÌïÑÏöîÌïú Í≤ΩÏö∞ ÌÅ¥Î¶∞ÏóÖ Ìï®Ïàò Ï∂îÍ∞Ä.

#### **3. ÏùòÏ°¥ÏÑ± Í¥ÄÎ¶¨**
ReactÎäî ÏßÄÏ†ïÌïú Î™®Îì† Ï¢ÖÏÜçÏÑ±Ïù¥ Ïù¥Ï†Ñ Î†åÎçîÎßÅÏùò Í∑∏Í≤ÉÍ≥º Ï†ïÌôïÌûà ÎèôÏùºÌïú Í∞íÏùÑ Í∞ÄÏßÑ Í≤ΩÏö∞ÏóêÎßå EffectÎ•º Îã§Ïãú Ïã§ÌñâÌïòÏßÄ ÏïäÏäµÎãàÎã§. ReactÎäî Object.is ÎπÑÍµêÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Ï¢ÖÏÜçÏÑ± Í∞íÏùÑ ÎπÑÍµêÌï©ÎãàÎã§.

#### **4. ÌÅ¥Î¶∞ÏóÖÏùò Ï§ëÏöîÏÑ±**
ReactÎäî EffectÍ∞Ä Îã§Ïãú Ïã§ÌñâÎêòÍ∏∞ Ï†ÑÎßàÎã§ ÌÅ¥Î¶∞ÏóÖ Ìï®ÏàòÎ•º Ìò∏Ï∂úÌïòÍ≥†, Ïª¥Ìè¨ÎÑåÌä∏Í∞Ä ÎßàÏö¥Ìä∏ Ìï¥Ï†ú(Ï†úÍ±∞)Îê† ÎïåÏóêÎèÑ ÎßàÏßÄÎßâÏúºÎ°ú Ìò∏Ï∂úÌï©ÎãàÎã§.

#### **5. Í∞úÎ∞ú Î™®ÎìúÏùò ÌäπÎ≥ÑÌïú ÎèôÏûë**
ReactÎäî Í∞úÎ∞ú Î™®ÎìúÏóêÏÑú Ï¥àÍ∏∞ ÎßàÏö¥Ìä∏ ÌõÑ Î™®Îì† Ïª¥Ìè¨ÎÑåÌä∏Î•º Ìïú Î≤à Îã§Ïãú ÎßàÏö¥Ìä∏Ìï©ÎãàÎã§. Ïù¥Îäî EffectÍ∞Ä Ïò¨Î∞îÎ•¥Í≤å ÌÅ¥Î¶∞ÏóÖÎêòÎäîÏßÄ ÌôïÏù∏ÌïòÍ∏∞ ÏúÑÌïú Í≤ÉÏûÖÎãàÎã§.

### üö´ **EffectÍ∞Ä ÌïÑÏöî ÏóÜÎäî Í≤ΩÏö∞Îì§**

#### **Î†åÎçîÎßÅÏö© Îç∞Ïù¥ÌÑ∞ Î≥ÄÌôò**
Î†åÎçîÎßÅÏùÑ ÏúÑÌï¥ Îç∞Ïù¥ÌÑ∞Î•º Î≥ÄÌôòÌïòÎäî Îç∞Îäî EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏäµÎãàÎã§. Î†åÎçîÎßÅ Ï§ëÏóê Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÎã§Î©¥ EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏäµÎãàÎã§. ÎπÑÏãº Í≥ÑÏÇ∞ÏùÑ Ï∫êÏãúÌïòÎ†§Î©¥ useEffect ÎåÄÏã† useMemoÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî.

#### **ÏÇ¨Ïö©Ïûê Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨**
ÏÇ¨Ïö©Ïûê Ïù¥Î≤§Ìä∏Î•º Ï≤òÎ¶¨ÌïòÎäî Îç∞Îäî EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏäµÎãàÎã§. Íµ¨Îß§ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú POST ÏöîÏ≤≠ÏùÑ Î≥¥ÎÇ¥Îäî Í≤ÉÏùÄ ÌäπÏ†ï ÏÉÅÌò∏ÏûëÏö©Ïóê Îî∞Î•∏ Ïù¥Î≤§Ìä∏Ïù¥ÎØÄÎ°ú Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ÏóêÏÑú Ï≤òÎ¶¨Ìï¥Ïïº Ìï©ÎãàÎã§.

### üîÑ **EffectÏùò ÏÉùÎ™ÖÏ£ºÍ∏∞**

EffectÎäî Ïª¥Ìè¨ÎÑåÌä∏ÏôÄ Îã§Î•∏ ÏÉùÎ™ÖÏ£ºÍ∏∞Î•º Í∞ÄÏßëÎãàÎã§. Ïª¥Ìè¨ÎÑåÌä∏Îäî ÎßàÏö¥Ìä∏, ÏóÖÎç∞Ïù¥Ìä∏, Ïñ∏ÎßàÏö¥Ìä∏Ìï† Ïàò ÏûàÏßÄÎßå, EffectÎäî Îëê Í∞ÄÏßÄÎßå Ìï† Ïàò ÏûàÏäµÎãàÎã§: Î¨¥Ïñ∏Í∞ÄÎ•º ÎèôÍ∏∞ÌôîÌïòÍ∏∞ ÏãúÏûëÌïòÍ≥†, ÎÇòÏ§ëÏóê ÎèôÍ∏∞ÌôîÎ•º Ï§ëÏßÄÌïòÎäî Í≤É.

Ïª¥Ìè¨ÎÑåÌä∏ ÎÇ¥Î∂ÄÏùò Î™®Îì† Í∞íÎì§(props, state, Ïª¥Ìè¨ÎÑåÌä∏ Î≥∏Î¨∏Ïùò Î≥ÄÏàòÎì§ Ìè¨Ìï®)ÏùÄ Î∞òÏùëÌòïÏûÖÎãàÎã§. Î∞òÏùëÌòï Í∞íÏùÄ Ïû¨Î†åÎçîÎßÅ Ïãú Î≥ÄÍ≤ΩÎê† Ïàò ÏûàÏúºÎØÄÎ°ú, Î∞òÏùëÌòï Í∞íÎì§ÏùÑ EffectÏùò ÏùòÏ°¥ÏÑ±ÏúºÎ°ú Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.

### üí° **Effect ÏÇ¨Ïö© Ìå®ÌÑ¥Îì§**

#### **1. ÏÑúÎìúÌååÌã∞ ÏúÑÏ†Ø Ï†úÏñ¥**
ÏßÄÎèÑ Ïª¥Ìè¨ÎÑåÌä∏Ïùò `setZoomLevel()` Í∞ôÏùÄ Î©îÏÑúÎìú Ìò∏Ï∂ú

#### **2. Ïù¥Î≤§Ìä∏ Íµ¨ÎèÖ**
`addEventListener`/`removeEventListener` Ìå®ÌÑ¥

#### **3. Ïï†ÎãàÎ©îÏù¥ÏÖò Ìä∏Î¶¨Í±∞**
ÌÅ¥Î¶∞ÏóÖÏóêÏÑú Ï¥àÍ∏∞Í∞íÏúºÎ°ú Î¶¨ÏÖã

#### **4. Îç∞Ïù¥ÌÑ∞ ÌéòÏπ≠**
AbortControllerÎ•º ÏÇ¨Ïö©Ìïú Ï§ëÎã® Ï≤òÎ¶¨

#### **5. Î∂ÑÏÑù Î°úÍ∑∏ Ï†ÑÏÜ°**
ÌéòÏù¥ÏßÄ Î∞©Î¨∏ Ïãú Î∂ÑÏÑù Ïù¥Î≤§Ìä∏ Ï†ÑÏÜ°

### Ï±åÎ¶∞ÏßÄ
#### Ï±åÎ¶∞ÏßÄ 1 of 4: ÎßàÏö¥Ìä∏Ïãú input ÌïÑÎìúÏóê Ìè¨Ïª§Ïä§ÌïòÍ∏∞

```typescript jsx
import { useEffect, useRef } from 'react';

export default function MyInput({ value, onChange }) {
  const ref = useRef(null);

  
  useEffect(() => {
    if(ref.current){
      ref.current.focus()
    }
  }, [])

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}

```
#### Ï±åÎ¶∞ÏßÄ 2 of 4: Ï°∞Í±¥Î∂ÄÎ°ú input ÌïÑÎìúÏóê Ìè¨Ïª§Ïä§ÌïòÍ∏∞ 
```typescript jsx
import { useEffect, useRef } from 'react';

export default function MyInput({ shouldFocus, value, onChange }) {
  const ref = useRef(null);

  useEffect(() => {
    if(!shouldFocus) return
    ref.current.focus();
  }, [shouldFocus]);

  return (
    <input
      ref={ref}
      value={value}
      onChange={onChange}
    />
  );
}

```

#### Ï±åÎ¶∞ÏßÄ 3 of 4: Îëê Î≤à Ïã§ÌñâÎêòÎäî interval Í≥†ÏπòÍ∏∞ 
```typescript jsx
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    function onTick() {
      setCount(c => c + 1);
    }

    const interval = setInterval(onTick, 1000);
    return () => {
      clearInterval(interval)
    }
  }, []);

  return <h1>{count}</h1>;
}

```
#### Ï±åÎ¶∞ÏßÄ 4 of 4: Effect ÎÇ¥Î∂ÄÏóêÏÑúÏùò ÏûòÎ™ªÎêú Îç∞Ïù¥ÌÑ∞ ÌéòÏπ≠ Í≥†ÏπòÍ∏∞ 

https://codesandbox.io/p/sandbox/react-dev-forked-tvvn37?file=%2Fsrc%2FApp.js%3A15%2C26
https://developer.mozilla.org/en-US/docs/Web/API/AbortController

# EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞

### üìñ **ÌïµÏã¨ Í∞úÎÖê**

EffectÎäî React Ìå®Îü¨Îã§ÏûÑÏóêÏÑú Î≤óÏñ¥ÎÇ† Ïàò ÏûàÎäî ÌÉàÏ∂úÍµ¨ÏûÖÎãàÎã§. EffectÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ ReactÎ•º "Î≤óÏñ¥ÎÇò" Ïª¥Ìè¨ÎÑåÌä∏Î•º ReactÍ∞Ä ÏïÑÎãå ÏúÑÏ†Ø, ÎÑ§Ìä∏ÏõåÌÅ¨, ÎòêÎäî Î∏åÎùºÏö∞Ï†Ä DOMÍ≥º Í∞ôÏùÄ Ïô∏Î∂Ä ÏãúÏä§ÌÖúÍ≥º ÎèôÍ∏∞ÌôîÌï† Ïàò ÏûàÏäµÎãàÎã§.

**EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏùÄ Îëê Í∞ÄÏßÄ Ï£ºÏöî Í≤ΩÏö∞:**
1. **Î†åÎçîÎßÅÏö© Îç∞Ïù¥ÌÑ∞ Î≥ÄÌôò**
2. **ÏÇ¨Ïö©Ïûê Ïù¥Î≤§Ìä∏ Ï≤òÎ¶¨**

Î∂àÌïÑÏöîÌïú EffectÎ•º Ï†úÍ±∞ÌïòÎ©¥ ÏΩîÎìúÎ•º Îçî ÏâΩÍ≤å Îî∞ÎùºÍ∞à Ïàò ÏûàÍ≥†, Ïã§Ìñâ ÏÜçÎèÑÍ∞Ä Îπ®ÎùºÏßÄÎ©∞, ÏóêÎü¨ Î∞úÏÉù Í∞ÄÎä•ÏÑ±Ïù¥ Ï§ÑÏñ¥Îì≠ÎãàÎã§.

### üö´ **EffectÍ∞Ä ÌïÑÏöî ÏóÜÎäî Ìå®ÌÑ¥Îì§**

#### **1. Props/State Í∏∞Î∞ò ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏**
```javascript
// ‚ùå ÏûòÎ™ªÎêú Î∞©Î≤ï
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  const [fullName, setFullName] = useState('');
  
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
}

// ‚úÖ Ïò¨Î∞îÎ•∏ Î∞©Î≤ï
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // Î†åÎçîÎßÅ Ï§ëÏóê Í≥ÑÏÇ∞
  const fullName = firstName + ' ' + lastName;
}
```

Í∏∞Ï°¥ propsÎÇò stateÏóêÏÑú Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÎäî Í≤ÉÏù¥ ÏûàÏúºÎ©¥, Í∑∏Í≤ÉÏùÑ stateÏóê ÎÑ£ÏßÄ ÎßàÏÑ∏Ïöî. ÎåÄÏã†, Î†åÎçîÎßÅ Ï§ëÏóê Í≥ÑÏÇ∞ÌïòÍ≤å ÌïòÏÑ∏Ïöî.

#### **2. ÎπÑÏö©Ïù¥ ÎßéÏù¥ ÎìúÎäî Í≥ÑÏÇ∞**
```javascript
// ‚úÖ useMemoÎ°ú Ï∫êÏã±
import { useMemo } from 'react';

function TodoList({ todos, filter }) {
  const visibleTodos = useMemo(() => {
    return getFilteredTodos(todos, filter);
  }, [todos, filter]);
}
```

**ÏÑ±Îä• Ï∏°Ï†ï ÌåÅ:**
console.timeÍ≥º console.timeEndÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÏãúÍ∞ÑÏùÑ Ï∏°Ï†ïÌï† Ïàò ÏûàÏäµÎãàÎã§. Ï†ÑÏ≤¥Ï†ÅÏúºÎ°ú Í∏∞Î°ùÎêú ÏãúÍ∞ÑÏù¥ ÏÉÅÎãπÌïú Ïñë(Ïòà: 1ms Ïù¥ÏÉÅ)ÏúºÎ°ú Ìï©ÏÇ∞ÎêòÎ©¥ Ìï¥Îãπ Í≥ÑÏÇ∞ÏùÑ Î©îÎ™®Ïù¥Ï†úÏù¥ÏÖòÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.

#### **3. Prop Î≥ÄÍ≤Ω Ïãú State Ï¥àÍ∏∞Ìôî**
```javascript
// ‚ùå Effect ÏÇ¨Ïö©
function ProfilePage({ userId }) {
  const [comment, setComment] = useState('');
  
  useEffect(() => {
    setComment('');
  }, [userId]);
}

// ‚úÖ key ÏÇ¨Ïö©
function ProfilePage({ userId }) {
  return <Profile userId={userId} key={userId} />;
}

function Profile({ userId }) {
  const [comment, setComment] = useState('');
  // key Î≥ÄÍ≤Ω Ïãú ÏûêÎèôÏúºÎ°ú Ïû¨ÏÑ§Ï†ïÎê®
}
```

userIdÎ•º keyÎ°ú Ï†ÑÎã¨ÌïòÎ©¥ ReactÍ∞Ä userIdÍ∞Ä Îã§Î•∏ Îëê Í∞úÏùò Profile Ïª¥Ìè¨ÎÑåÌä∏Î•º stateÎ•º Í≥µÏú†Ìï¥ÏÑúÎäî Ïïà ÎêòÎäî Îëê Í∞úÏùò Îã§Î•∏ Ïª¥Ìè¨ÎÑåÌä∏Î°ú Ï∑®Í∏âÌïòÎèÑÎ°ù ÏöîÏ≤≠ÌïòÎäî Í≤ÉÏûÖÎãàÎã§.

#### **4. Î†åÎçîÎßÅ Ï§ë State Ï°∞Ï†ï**
```javascript
function List({ items }) {
  const [selection, setSelection] = useState(null);
  const [prevItems, setPrevItems] = useState(items);
  
  // Î†åÎçîÎßÅ Ï§ë state Ï°∞Ï†ï
  if (items !== prevItems) {
    setPrevItems(items);
    setSelection(null);
  }
}
```

### ‚úÖ **Ïò¨Î∞îÎ•∏ ÎåÄÏïàÎì§**

#### **1. Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ Í∞Ñ Î°úÏßÅ Í≥µÏú†**
```javascript
// ‚úÖ Í≥µÏú† Ìï®Ïàò ÏÇ¨Ïö©
function ProductPage({ product, addToCart }) {
  function buyProduct() {
    addToCart(product);
    showNotification(`Added ${product.name} to the shopping cart!`);
  }

  function handleBuyClick() {
    buyProduct();
  }

  function handleCheckoutClick() {
    buyProduct();
    navigateTo('/checkout');
  }
}
```

#### **2. POST ÏöîÏ≤≠Í≥º Ïù¥Î≤§Ìä∏ Íµ¨Î∂Ñ**
```javascript
function Form() {
  // ‚úÖ Ïª¥Ìè¨ÎÑåÌä∏ ÌëúÏãúÎ°ú Ïù∏Ìïú analytics
  useEffect(() => {
    post('/analytics/event', { eventName: 'visit_form' });
  }, []);

  function handleSubmit(e) {
    e.preventDefault();
    // ‚úÖ ÌäπÏ†ï ÏÉÅÌò∏ÏûëÏö©ÏúºÎ°ú Ïù∏Ìïú API ÏöîÏ≤≠
    post('/api/register', { firstName, lastName });
  }
}
```

Ïñ¥Îñ§ Î°úÏßÅÏùÑ Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Ïóê ÎÑ£ÏùÑÏßÄ EffectÏóê ÎÑ£ÏùÑÏßÄ ÏÑ†ÌÉùÌï† Îïå ÏÇ¨Ïö©Ïûê Í¥ÄÏ†êÏóêÏÑú Ïñ¥Îñ§ Ï¢ÖÎ•òÏùò Î°úÏßÅÏù∏ÏßÄÏóê ÎåÄÌïú ÎãµÏùÑ Ï∞æÏïÑÏïº Ìï©ÎãàÎã§.

#### **3. Effect Ï≤¥Ïù∏ Î∞©ÏßÄ**
```javascript
// ‚ùå Effect Ï≤¥Ïù∏
useEffect(() => {
  if (card !== null && card.gold) {
    setGoldCardCount(c => c + 1);
  }
}, [card]);

useEffect(() => {
  if (goldCardCount > 3) {
    setRound(r => r + 1);
    setGoldCardCount(0);
  }
}, [goldCardCount]);

// ‚úÖ Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ÏóêÏÑú Î™®Îì† state Í≥ÑÏÇ∞
function handlePlaceCard(nextCard) {
  setCard(nextCard);
  if (nextCard.gold) {
    if (goldCardCount <= 3) {
      setGoldCardCount(goldCardCount + 1);
    } else {
      setGoldCardCount(0);
      setRound(round + 1);
      if (round === 5) {
        alert('Good game!');
      }
    }
  }
}
```

#### **4. Ïô∏Î∂Ä Ï†ÄÏû•ÏÜå Íµ¨ÎèÖ**
```javascript
// ‚úÖ useSyncExternalStore ÏÇ¨Ïö©
function useOnlineStatus() {
  return useSyncExternalStore(
    subscribe, // Íµ¨ÎèÖ Ìï®Ïàò
    () => navigator.onLine, // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑú Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
    () => true // ÏÑúÎ≤ÑÏóêÏÑú Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
  );
}

function subscribe(callback) {
  window.addEventListener('online', callback);
  window.addEventListener('offline', callback);
  return () => {
    window.removeEventListener('online', callback);
    window.removeEventListener('offline', callback);
  };
}
```

Ïù¥ Ï†ëÍ∑º Î∞©ÏãùÏùÄ Î≥ÄÍ≤Ω Í∞ÄÎä•Ìïú Îç∞Ïù¥ÌÑ∞Î•º EffectÎ•º ÏÇ¨Ïö©Ìï¥ React stateÏóê ÏàòÎèôÏúºÎ°ú ÎèôÍ∏∞ÌôîÌïòÎäî Í≤ÉÎ≥¥Îã§ ÏóêÎü¨Í∞Ä Îçú Î∞úÏÉùÌï©ÎãàÎã§.

#### **5. Îç∞Ïù¥ÌÑ∞ ÌéòÏπ≠ Î™®Î≤î ÏÇ¨Î°Ä**
```javascript
// ‚úÖ Ï†ïÎ¶¨ Ìï®ÏàòÎ°ú Í≤ΩÏüÅ Ï°∞Í±¥ Î∞©ÏßÄ
function SearchResults({ query }) {
  const [results, setResults] = useState([]);
  
  useEffect(() => {
    let ignore = false;
    
    fetchResults(query, page).then(json => {
      if (!ignore) {
        setResults(json);
      }
    });
    
    return () => {
      ignore = true;
    };
  }, [query, page]);
}

// ‚úÖ Ïª§Ïä§ÌÖÄ ÌõÖÏúºÎ°ú Ï∂îÏ∂ú
function useData(url) {
  const [data, setData] = useState(null);
  
  useEffect(() => {
    let ignore = false;
    
    fetch(url)
      .then(response => response.json())
      .then(json => {
        if (!ignore) {
          setData(json);
        }
      });
    
    return () => {
      ignore = true;
    };
  }, [url]);
  
  return data;
}
```

### üéØ **ÌïµÏã¨ ÌåêÎã® Í∏∞Ï§Ä**

Ïª¥Ìè¨ÎÑåÌä∏Í∞Ä ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌëúÏãúÎêòÏóàÍ∏∞ ÎïåÎ¨∏Ïóê Ïã§ÌñâÎêòÏñ¥Ïïº ÌïòÎäî ÏΩîÎìúÏóêÎßå EffectÎ•º ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.

**ÏßàÎ¨∏Ìï¥Ïïº Ìï† Í≤ÉÎì§:**
- Ïù¥ ÏΩîÎìúÍ∞Ä ÌäπÏ†ï ÏÉÅÌò∏ÏûëÏö© ÎïåÎ¨∏Ïóê Ïã§ÌñâÎêòÎäîÍ∞Ä? ‚Üí Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨
- Î†åÎçîÎßÅ Ï§ëÏóê Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÎäîÍ∞Ä? ‚Üí ÏßÅÏ†ë Í≥ÑÏÇ∞ ÎòêÎäî useMemo
- Ïô∏Î∂Ä ÏãúÏä§ÌÖúÍ≥º ÎèôÍ∏∞ÌôîÍ∞Ä ÌïÑÏöîÌïúÍ∞Ä? ‚Üí Effect ÏÇ¨Ïö©

### üîó **Í¥ÄÎ†® Ï£ºÏöî Í∞úÎÖêÎì§**

1. **React Î†åÎçîÎßÅ Î™®Îç∏**: Î†åÎçîÎßÅÏùÄ ReactÍ∞Ä Ïª¥Ìè¨ÎÑåÌä∏Î•º Ìò∏Ï∂úÌïòÏó¨ ÌôîÎ©¥Ïóê Î¨¥ÏóáÏùÑ ÌëúÏãúÌï†ÏßÄ ÏïåÏïÑÎÇ¥Îäî Í≤ÉÏûÖÎãàÎã§. Ïª§Î∞ã Îã®Í≥ÑÏóêÏÑú ReactÎäî DOMÏùÑ ÏóÖÎç∞Ïù¥Ìä∏Ìï©ÎãàÎã§

2. **State Íµ¨Ï°∞ ÏÑ†ÌÉù**: stateÎ•º Íµ¨Ï°∞ÌôîÌï† ÎïåÏùò ÏõêÏπôÏùÄ Í¥ÄÎ†® state Í∑∏Î£πÌôî, Î™®Ïàú Î∞©ÏßÄ, Ï§ëÎ≥µ Î∞©ÏßÄ, ÍπäÏùÄ Ï§ëÏ≤© Î∞©ÏßÄÏûÖÎãàÎã§

3. **State ÎÅåÏñ¥Ïò¨Î¶¨Í∏∞**: Îëê Ïª¥Ìè¨ÎÑåÌä∏Î•º Ï°∞Ï†ïÌïòÎ†§Î©¥ Í≥µÌÜµ Î∂ÄÎ™®Î°ú stateÎ•º Ïù¥ÎèôÌïòÏÑ∏Ïöî

### üìã **ÏöîÏïΩ**

Î†åÎçîÎßÅ Ï§ëÏóê Î¨¥Ïñ∏Í∞ÄÎ•º Í≥ÑÏÇ∞Ìï† Ïàò ÏûàÎã§Î©¥ EffectÍ∞Ä ÌïÑÏöîÌïòÏßÄ ÏïäÏäµÎãàÎã§. ÎπÑÏö©Ïù¥ ÎßéÏù¥ ÎìúÎäî Í≥ÑÏÇ∞ÏùÑ Ï∫êÏãúÌïòÎ†§Î©¥ useEffect ÎåÄÏã† useMemoÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî. Ï†ÑÏ≤¥ Ïª¥Ìè¨ÎÑåÌä∏ Ìä∏Î¶¨Ïùò stateÎ•º Ï¥àÍ∏∞ÌôîÌïòÎ†§Î©¥ Îã§Î•∏ keyÎ•º Ï†ÑÎã¨ÌïòÏÑ∏Ïöî.

### Ï±åÎ¶∞ÏßÄ
#### Ï±åÎ¶∞ÏßÄ 1 of 4: Effect ÏóÜÏù¥ Îç∞Ïù¥ÌÑ∞ Î≥ÄÌôòÌïòÍ∏∞ 
https://codesandbox.io/p/sandbox/react-dev-forked-x63hgq?file=%2Fsrc%2FApp.js%3A20%2C51

#### Ï±åÎ¶∞ÏßÄ 2 of 4: Effect ÏóÜÏù¥ Í≥ÑÏÇ∞ Ï∫êÏãúÌïòÍ∏∞ 
```typescript jsx
import { useState, useEffect, useMemo } from 'react';
import { initialTodos, createTodo, getVisibleTodos } from './todos.js';

export default function TodoList() {
  const [todos, setTodos] = useState(initialTodos);
  const [showActive, setShowActive] = useState(false);
  const [text, setText] = useState('');

  const visibleTodos = useMemo( () => {
    return getVisibleTodos(todos, showActive)
  }, [todos, showActive])

  function handleAddClick() {
    setText('');
    setTodos([...todos, createTodo(text)]);
  }

  return (
    <>
      <label>
        <input
          type="checkbox"
          checked={showActive}
          onChange={e => setShowActive(e.target.checked)}
        />
        Show only active todos
      </label>
      <input value={text} onChange={e => setText(e.target.value)} />
      <button onClick={handleAddClick}>
        Add
      </button>
      <ul>
        {visibleTodos.map(todo => (
          <li key={todo.id}>
            {todo.completed ? <s>{todo.text}</s> : todo.text}
          </li>
        ))}
      </ul>
    </>
  );
}

```
#### Ï±åÎ¶∞ÏßÄ 3 of 4: Effect ÏóÜÏù¥ state Ï¥àÍ∏∞ÌôîÌïòÍ∏∞ 
```typescript jsx
import { useState, useEffect } from 'react';

const Form = ({savedContact, onSave}) => {
  const [name, setName] = useState(savedContact.name);
  const [email, setEmail] = useState(savedContact.email);

  return (
    <section >
      <label>
        Name:{' '}
        <input
          type="text"
          value={name}
          onChange={e => setName(e.target.value)}
        />
      </label>
      <label>
        Email:{' '}
        <input
          type="email"
          value={email}
          onChange={e => setEmail(e.target.value)}
        />
      </label>
      <button onClick={() => {
        const updatedData = {
          id: savedContact.id,
          name: name,
          email: email
        };
        onSave(updatedData);
      }}>
        Save
      </button>
      <button onClick={() => {
        setName(savedContact.name);
        setEmail(savedContact.email);
      }}>
        Reset
      </button>
    </section>
  )
}

export default function EditContact({ savedContact, onSave }) {
  return (
    <Form key={savedContact.id} savedContact={savedContact} onSave={onSave} />
  );
}

```
#### Ï±åÎ¶∞ÏßÄ 4 of 4: Effect ÏóÜÏù¥ Ìèº Ï†úÏ∂úÌïòÍ∏∞ 
```typescript jsx
import { useState, useEffect } from 'react';

export default function Form() {
  const [showForm, setShowForm] = useState(false);
  const [message, setMessage] = useState('');

  function handleSubmit(e) {
    e.preventDefault();
    setShowForm((state) => !state);    
    sendMessage(message);
  }

  if (!showForm) {
    return (
      <>
        <h1>Thanks for using our services!</h1>
        <button onClick={() => {
          setMessage('');
          setShowForm((state) => !state);
        }}>
          Open chat
        </button>
      </>
    );
  }

  return (
    <form onSubmit={handleSubmit}>
      <textarea
        placeholder="Message"
        value={message}
        onChange={e => setMessage(e.target.value)}
      />
      <button type="submit" disabled={message === ''}>
        Send
      </button>
    </form>
  );
}

function sendMessage(message) {
  console.log('Sending message: ' + message);
}

```

# React EffectÏùò ÏÉùÎ™ÖÏ£ºÍ∏∞

### üîÑ **ÌïµÏã¨ Í∞úÎÖê: Îã§Î•∏ ÏÉùÎ™ÖÏ£ºÍ∏∞**

EffectsÎäî Ïª¥Ìè¨ÎÑåÌä∏ÏôÄ Îã§Î•∏ ÏÉùÎ™ÖÏ£ºÍ∏∞Î•º Í∞ÄÏßëÎãàÎã§. Ïª¥Ìè¨ÎÑåÌä∏Îäî ÎßàÏö¥Ìä∏, ÏóÖÎç∞Ïù¥Ìä∏ ÎòêÎäî ÎßàÏö¥Ìä∏ Ìï¥Ï†úÌï† Ïàò ÏûàÏäµÎãàÎã§. EffectÎäî ÎèôÍ∏∞ÌôîÎ•º ÏãúÏûëÌïòÍ≥† ÎÇòÏ§ëÏóê ÎèôÍ∏∞ÌôîÎ•º Ï§ëÏßÄÌïòÎäî Îëê Í∞ÄÏßÄ ÏûëÏóÖÎßå Ìï† Ïàò ÏûàÏäµÎãàÎã§.

**Ïª¥Ìè¨ÎÑåÌä∏ ÏÉùÎ™ÖÏ£ºÍ∏∞:**
- ÎßàÏö¥Ìä∏ ‚Üí ÏóÖÎç∞Ïù¥Ìä∏ ‚Üí Ïñ∏ÎßàÏö¥Ìä∏

**Effect ÏÉùÎ™ÖÏ£ºÍ∏∞:**
- ÎèôÍ∏∞Ìôî ÏãúÏûë ‚Üí ÎèôÍ∏∞Ìôî Ï§ëÏßÄ (Î∞òÎ≥µ Í∞ÄÎä•)

Ïª¥Ìè¨ÎÑåÌä∏Ïùò ÏÉùÎ™ÖÏ£ºÍ∏∞ÏôÄ ÎèÖÎ¶ΩÏ†ÅÏúºÎ°ú Í∞Å EffectÎ•º ÏÉùÍ∞ÅÌï¥ Î≥¥ÏÑ∏Ïöî. EffectÎäî Ïô∏Î∂Ä ÏãúÏä§ÌÖúÏùÑ ÌòÑÏû¨ props Î∞è stateÏôÄ ÎèôÍ∏∞ÌôîÌïòÎäî Î∞©Î≤ïÏùÑ ÏÑ§Î™ÖÌï©ÎãàÎã§.

### üéØ **Effect Í¥ÄÏ†êÏúºÎ°ú ÏÇ¨Í≥†ÌïòÍ∏∞**

#### **‚ùå Ïª¥Ìè¨ÎÑåÌä∏ Í¥ÄÏ†ê (ÌîºÌï¥Ïïº Ìï† ÏÇ¨Í≥†)**
```javascript
// "ÎßàÏö¥Ìä∏ Ïãú Ïó∞Í≤∞, Ïñ∏ÎßàÏö¥Ìä∏ Ïãú Ìï¥Ï†ú"ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÏßÄ ÎßàÏÑ∏Ïöî
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, [roomId]);
```

#### **‚úÖ Effect Í¥ÄÏ†ê (Ïò¨Î∞îÎ•∏ ÏÇ¨Í≥†)**
Ìï≠ÏÉÅ Ìïú Î≤àÏóê ÌïòÎÇòÏùò ÏãúÏûë/Ï§ëÏßÄ ÏÇ¨Ïù¥ÌÅ¥ÏóêÎßå ÏßëÏ§ëÌïòÏÑ∏Ïöî. Ïª¥Ìè¨ÎÑåÌä∏Î•º ÎßàÏö¥Ìä∏, ÏóÖÎç∞Ïù¥Ìä∏ ÎòêÎäî ÎßàÏö¥Ìä∏ Ìï¥Ï†úÌïòÎäî Í≤ÉÏùÄ Ï§ëÏöîÌïòÏßÄ ÏïäÏäµÎãàÎã§. ÎèôÍ∏∞ÌôîÎ•º ÏãúÏûëÌïòÎäî Î∞©Î≤ïÍ≥º Ï§ëÏßÄÌïòÎäî Î∞©Î≤ïÎßå ÏÑ§Î™ÖÌïòÎ©¥ Îê©ÎãàÎã§.

### üîÅ **Ïû¨ÎèôÍ∏∞Ìôî Í≥ºÏ†ï**

roomIdÍ∞Ä `"general"` ‚Üí `"travel"`Î°ú Î≥ÄÍ≤ΩÎê† Îïå:

1. **Ï§ëÏßÄ**: ReactÎäî "general" Î∞©Ïóê Ïó∞Í≤∞Ìïú ÌõÑ EffectÍ∞Ä Î∞òÌôòÌïú cleanup Ìï®ÏàòÎ•º Ìò∏Ï∂úÌï©ÎãàÎã§
2. **ÏãúÏûë**: Í∑∏Îü¨Î©¥ ReactÎäî Ïù¥ Î†åÎçîÎßÅ Ï§ëÏóê Ïó¨Îü¨Î∂ÑÏù¥ Ï†úÍ≥µÌïú EffectÎ•º Ïã§ÌñâÌï©ÎãàÎã§. Ïù¥Î≤àÏóêÎäî roomIdÍ∞Ä "travel"Ïù¥ÎØÄÎ°ú "travel" Ï±ÑÌåÖÎ∞©Í≥º ÎèôÍ∏∞ÌôîÎêòÍ∏∞ ÏãúÏûëÌï©ÎãàÎã§

### üìã **Í∞úÎ≥Ñ ÎèôÍ∏∞Ìôî Í≥ºÏ†ï**

Í∞Å EffectÎäî Î≥ÑÎèÑÏùò ÎèÖÎ¶ΩÏ†ÅÏù∏ ÎèôÍ∏∞Ìôî ÌîÑÎ°úÏÑ∏Ïä§Î•º ÎÇòÌÉÄÎÇ¥Ïïº Ìï©ÎãàÎã§.

```javascript
// ‚ùå Í¥ÄÎ†® ÏóÜÎäî Î°úÏßÅÏùÑ ÌïòÎÇòÏùò EffectÏóê ÏÑûÏßÄ ÎßàÏÑ∏Ïöî
useEffect(() => {
  logVisit(roomId); // Î∞©Î¨∏ Î°úÍ∑∏
  const connection = createConnection(serverUrl, roomId); // Ïó∞Í≤∞
  connection.connect();
  return () => connection.disconnect();
}, [roomId]);

// ‚úÖ Î≥ÑÎèÑÏùò EffectÎ°ú Î∂ÑÎ¶¨ÌïòÏÑ∏Ïöî
useEffect(() => {
  logVisit(roomId); // Î∞©Î¨∏ Î°úÍ∑∏Ïö© Effect
}, [roomId]);

useEffect(() => {
  const connection = createConnection(serverUrl, roomId); // Ïó∞Í≤∞Ïö© Effect
  connection.connect();
  return () => connection.disconnect();
}, [roomId]);
```

### ‚ö° **Î∞òÏùëÌòï Í∞í (Reactive Values)**

Ïª¥Ìè¨ÎÑåÌä∏ ÎÇ¥Î∂ÄÏùò Î™®Îì† Í∞í(Ïª¥Ìè¨ÎÑåÌä∏ Î≥∏Î¨∏Ïùò props, state, Î≥ÄÏàò Ìè¨Ìï®)ÏùÄ Î∞òÏùëÌòïÏûÖÎãàÎã§. Î™®Îì† Î∞òÏùëÌòï Í∞íÏùÄ Îã§Ïãú Î†åÎçîÎßÅÌï† Îïå Î≥ÄÍ≤ΩÎê† Ïàò ÏûàÏúºÎØÄÎ°ú Î∞òÏùëÌòï Í∞íÏùÑ EffectÏùò Ï¢ÖÏÜç ÏöîÏÜåÎ°ú Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.

#### **Î∞òÏùëÌòï Í∞íÎì§:**
- Props: `roomId`, `userId` Îì±
- State: `useState`Î°ú ÏÉùÏÑ±Îêú Í∞íÎì§
- Í≥ÑÏÇ∞Îêú Í∞í: `const serverUrl = selectedUrl ?? defaultUrl`

#### **ÎπÑÎ∞òÏùëÌòï Í∞íÎì§:**
- Ï†ÑÏó≠ Î≥ÄÏàò: `location.pathname`
- RefÏùò current: `ref.current`
- Ïª¥Ìè¨ÎÑåÌä∏ Ïô∏Î∂Ä ÏÉÅÏàò

```javascript
function ChatRoom({ roomId, selectedServerUrl }) {
  const settings = useContext(SettingsContext); // Î∞òÏùëÌòï
  const serverUrl = selectedServerUrl ?? settings.defaultServerUrl; // Î∞òÏùëÌòï
  
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]); // Îëò Îã§ ÏùòÏ°¥ÏÑ±Ïóê Ìè¨Ìï® ÌïÑÏöî
}
```

### üîç **ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥Ïùò ÏùòÎØ∏**

#### **Îπà Î∞∞Ïó¥ `[]`**
Îπà ÏùòÏ°¥ÏÑ± Î∞∞Ïó¥ÏùÄ Ïù¥ EffectÍ∞Ä Ïª¥Ìè¨ÎÑåÌä∏Í∞Ä ÎßàÏö¥Ìä∏Îê† ÎïåÎßå Ï±ÑÌåÖÎ∞©Ïóê Ïó∞Í≤∞ÎêòÍ≥† Ïª¥Ìè¨ÎÑåÌä∏Í∞Ä ÎßàÏö¥Ìä∏ Ìï¥Ï†úÎê† ÎïåÎßå Ïó∞Í≤∞Ïù¥ ÎÅäÏñ¥ÏßÑÎã§Îäî Í≤ÉÏùÑ ÏùòÎØ∏Ìï©ÎãàÎã§.

```javascript
// Î∞òÏùëÌòï Í∞íÏù¥ ÏóÜÎäî Í≤ΩÏö∞
const serverUrl = 'https://localhost:1234'; // ÎπÑÎ∞òÏùëÌòï
const roomId = 'general'; // ÎπÑÎ∞òÏùëÌòï

useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, []); // ‚úÖ Ïò¨Î∞îÎ¶Ñ - Î∞òÏùëÌòï Í∞íÏù¥ ÏóÜÏùå
```

#### **ÏùòÏ°¥ÏÑ±Ïù¥ ÏûàÎäî Î∞∞Ïó¥**
```javascript
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, [serverUrl, roomId]); // roomIdÎÇò serverUrl Î≥ÄÍ≤Ω Ïãú Ïû¨ÎèôÍ∏∞Ìôî
```

### üõ†Ô∏è **Î¶∞ÌÑ∞ÏôÄ ÏùòÏ°¥ÏÑ± Í≤ÄÏÇ¨**

ReactÎäî EffectÏùò ÏùòÏ°¥ÏÑ±ÏùÑ Ïò¨Î∞îÎ•¥Í≤å ÏßÄÏ†ïÌñàÎäîÏßÄ ÌôïÏù∏ÌïòÎäî Î¶∞ÌÑ∞ Í∑úÏπôÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§. Ïù¥Î†áÍ≤å ÌïòÎ©¥ EffectÍ∞Ä ÏµúÏã† propsÏôÄ stateÏóê ÎèôÍ∏∞ÌôîÎê©ÎãàÎã§.

```javascript
// ‚ùå Î¶∞ÌÑ∞ Ïò§Î•ò Î∞úÏÉù
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, []); // serverUrlÍ≥º roomIdÍ∞Ä ÎàÑÎùΩÎê®

// ‚úÖ Î¶∞ÌÑ∞ Ïò§Î•ò Ìï¥Í≤∞
useEffect(() => {
  const connection = createConnection(serverUrl, roomId);
  connection.connect();
  return () => connection.disconnect();
}, [serverUrl, roomId]); // Î™®Îì† Î∞òÏùëÌòï Í∞í Ìè¨Ìï®
```

### üé® **ÎπÑÎ∞òÏùëÌòïÏúºÎ°ú ÎßåÎìúÎäî Î∞©Î≤ï**

#### **1. Ïª¥Ìè¨ÎÑåÌä∏ Ïô∏Î∂ÄÎ°ú Ïù¥Îèô**
```javascript
const serverUrl = 'https://localhost:1234'; // ÎπÑÎ∞òÏùëÌòï
const roomId = 'general'; // ÎπÑÎ∞òÏùëÌòï

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // ‚úÖ ÏùòÏ°¥ÏÑ± Î∂àÌïÑÏöî
}
```

#### **2. Effect ÎÇ¥Î∂ÄÎ°ú Ïù¥Îèô**
```javascript
function ChatRoom() {
  useEffect(() => {
    const serverUrl = 'https://localhost:1234'; // ÎπÑÎ∞òÏùëÌòï
    const roomId = 'general'; // ÎπÑÎ∞òÏùëÌòï
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // ‚úÖ ÏùòÏ°¥ÏÑ± Î∂àÌïÑÏöî
}
```

### ‚ö†Ô∏è **ÏùºÎ∞òÏ†ÅÏù∏ Î¨∏Ï†úÏôÄ Ìï¥Í≤∞Ï±Ö**

#### **1. Î¨¥Ìïú Î£®ÌîÑ Î∞©ÏßÄ**
Í∞ùÏ≤¥ÏôÄ Ìï®ÏàòÎ•º Ï¢ÖÏÜçÏÑ±ÏúºÎ°ú ÏÇ¨Ïö©ÌïòÏßÄ ÎßàÏÑ∏Ïöî. Î†åÎçîÎßÅ Ï§ëÏóê Ïò§Î∏åÏ†ùÌä∏ÏôÄ Ìï®ÏàòÎ•º ÏÉùÏÑ±Ìïú Îã§Ïùå EffectÏóêÏÑú ÏùΩÏúºÎ©¥ Î†åÎçîÎßÅÌï† ÎïåÎßàÎã§ Ïò§Î∏åÏ†ùÌä∏ÏôÄ Ìï®ÏàòÍ∞Ä Îã¨ÎùºÏßëÎãàÎã§.

#### **2. Î¶∞ÌÑ∞ ÏñµÏ†ú Í∏àÏßÄ**
Î¶∞ÌÑ∞Ïóê ÏùòÌï¥ ÌîåÎûòÍ∑∏Í∞Ä ÏßÄÏ†ïÎêú Î™®Îì† Ïò§Î•òÎäî Ìï©Î≤ïÏ†ÅÏù∏ Ïò§Î•òÏûÖÎãàÎã§. Í∑úÏπôÏùÑ ÏúÑÎ∞òÌïòÏßÄ ÏïäÎèÑÎ°ù ÏΩîÎìúÎ•º ÏàòÏ†ïÌï† Î∞©Î≤ïÏùÄ Ìï≠ÏÉÅ ÏûàÏäµÎãàÎã§.

### üìä **ÏöîÏïΩ**

EffectÎ•º ÏûëÏÑ±ÌïòÍ≥† ÏùΩÏùÑ ÎïåÎäî Ïª¥Ìè¨ÎÑåÌä∏Ïùò Í¥ÄÏ†ê(ÎßàÏö¥Ìä∏, ÏóÖÎç∞Ïù¥Ìä∏ ÎòêÎäî ÎßàÏö¥Ìä∏ Ìï¥Ï†ú Î∞©Î≤ï)Ïù¥ ÏïÑÎãå Í∞úÎ≥Ñ EffectÏùò Í¥ÄÏ†ê(ÎèôÍ∏∞Ìôî ÏãúÏûë Î∞è Ï§ëÏßÄ Î∞©Î≤ï)ÏóêÏÑú ÏÉùÍ∞ÅÌïòÏÑ∏Ïöî.

**ÌïµÏã¨ ÏõêÏπô:**
- Í∞Å EffectÎäî ÎèÖÎ¶ΩÏ†ÅÏù∏ ÎèôÍ∏∞Ìôî Í≥ºÏ†ï
- Î∞òÏùëÌòï Í∞íÏùÄ Î™®Îëê ÏùòÏ°¥ÏÑ±Ïóê Ìè¨Ìï®
- Î¶∞ÌÑ∞Î•º ÎØøÍ≥† Îî∞Î•¥Í∏∞
- ÏùòÏ°¥ÏÑ±ÏùÑ "ÏÑ†ÌÉù"Ìï† Ïàò ÏóÜÏùå

Î™®Îì† ÎÇ¥Ïö©Ïù¥ **learn-frontend** Ïª¨Î†âÏÖòÏóê Ï†ÄÏû•ÎêòÏóàÏúºÎ©∞, EffectÏùò ÏÉùÎ™ÖÏ£ºÍ∏∞Î•º Ïò¨Î∞îÎ•¥Í≤å Ïù¥Ìï¥ÌïòÎäî Îç∞ ÎèÑÏõÄÏù¥ ÎêòÎäî Í≥µÏãù Í∞ÄÏù¥ÎìúÎùºÏù∏ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.

### Ï±åÎ¶∞ÏßÄ
#### Ï±åÎ¶∞ÏßÄ 1 of 5: Î™®Îì† ÌÇ§ ÏûÖÎ†• Ïãú Ïû¨Ïó∞Í≤∞ Î¨∏Ï†ú ÏàòÏ†ï
```typescript jsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

const Input = () => {
  const [message, setMessage] = useState('');
  return (
    <input
        value={message}
        onChange={e => setMessage(e.target.value)}
      />
  )
}

function ChatRoom({ roomId }) {

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  });

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <Input />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}

```

#### Ï±åÎ¶∞ÏßÄ 2 of 5: ÎèôÍ∏∞Ìôî ÏºúÍ∏∞ Î∞è ÎÅÑÍ∏∞ 
```typescript jsx
import { useState, useEffect } from 'react';

export default function App() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  const [canMove, setCanMove] = useState(true);

  useEffect(() => {
    function handleMove(e) {
      canMove && setPosition({ x: e.clientX, y: e.clientY });
    }
    window.addEventListener('pointermove', handleMove);
    return () => window.removeEventListener('pointermove', handleMove);
  }, [canMove]);

  return (
    <>
      <label>
        <input type="checkbox"
          checked={canMove}
          onChange={e => setCanMove(e.target.checked)}
        />
        The dot is allowed to move
      </label>
      <hr />
      <div style={{
        position: 'absolute',
        backgroundColor: 'pink',
        borderRadius: '50%',
        opacity: 0.6,
        transform: `translate(${position.x}px, ${position.y}px)`,
        pointerEvents: 'none',
        left: -20,
        top: -20,
        width: 40,
        height: 40,
      }} />
    </>
  );
}

```
#### Ï±åÎ¶∞ÏßÄ 3 of 5: Ïò§ÎûòÎêú Í∞í Î≤ÑÍ∑∏ Ï°∞ÏÇ¨ÌïòÍ∏∞ 
```typescript jsx
import { useState, useEffect } from 'react';

export default function App() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  const [canMove, setCanMove] = useState(true);

  function handleMove(e) {
    if (canMove) {
      setPosition({ x: e.clientX, y: e.clientY });
    }
  }

  useEffect(() => {
    window.addEventListener('pointermove', handleMove);
    return () => window.removeEventListener('pointermove', handleMove);
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [canMove]);

  return (
    <>
      <label>
        <input type="checkbox"
          checked={canMove}
          onChange={e => setCanMove(e.target.checked)}
        />
        The dot is allowed to move
      </label>
      <hr />
      <div style={{
        position: 'absolute',
        backgroundColor: 'pink',
        borderRadius: '50%',
        opacity: 0.6,
        transform: `translate(${position.x}px, ${position.y}px)`,
        pointerEvents: 'none',
        left: -20,
        top: -20,
        width: 40,
        height: 40,
      }} />
    </>
  );
}

```
#### Ï±åÎ¶∞ÏßÄ 4 of 5: Ïó∞Í≤∞ Ïä§ÏúÑÏπò ÏàòÏ†ï
```typescript jsx
import { useState, useEffect } from 'react';

export default function ChatRoom({ roomId, createConnection }) {
  useEffect(() => {
    const connection = createConnection(roomId);
    connection.connect();
    return () => connection.disconnect();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [roomId, createConnection]);

  return <h1>Welcome to the {roomId} room!</h1>;
}

```
#### Ï±åÎ¶∞ÏßÄ 5 of 5: select box Ï≤¥Ïù∏ Ï±ÑÏö∞Í∏∞ 
````typescript jsx
import { useState, useEffect } from 'react';
import { fetchData } from './api.js';

export default function Page() {
  const [planetList, setPlanetList] = useState([])
  const [planetId, setPlanetId] = useState('');

  const [placeList, setPlaceList] = useState([]);
  const [placeId, setPlaceId] = useState('');

  useEffect(() => {
    if(!planetId) return
    let ignore = false;
    fetchData('/planets/' + planetId + '/places').then(result => {
      if(!ignore) {
        setPlaceList(result);
        setPlaceId(result[0].id)
      }
    })
    return () => {
      ignore = true;
    }
  }, [planetId])

  useEffect(() => {
    let ignore = false;
    fetchData('/planets').then(result => {
      if (!ignore) {
        console.log('Fetched a list of planets.', result);
        setPlanetList(result);
        setPlanetId(result[0].id); // Ï≤´ Î≤àÏß∏ ÌñâÏÑ±ÏùÑ ÏÑ†ÌÉùÌï©ÎãàÎã§.
      }
    });
    return () => {
      ignore = true;
    }
  }, []);

  return (
    <>
      <label>
        Pick a planet:{' '}
        <select value={planetId} onChange={e => {
          setPlanetId(e.target.value);
        }}>
          {planetList.map(planet =>
            <option key={planet.id} value={planet.id}>{planet.name}</option>
          )}
        </select>
      </label>
      <label>
        Pick a place:{' '}
        <select value={placeId} onChange={e => {
          setPlaceId(e.target.value);
        }}>
          {placeList.map(place =>
            <option key={place.id} value={place.id}>{place.name}</option>
          )}
        </select>
      </label>
      <hr />
      <p>You are going to: {placeId || '???'} on {planetId || '???'} </p>
    </>
  );
}

```